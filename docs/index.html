<!DOCTYPE html>
<html>
<head>
    <title>Mondom a Tutit - Előfizetés</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <div class="container">
        <h1>Mondom a Tutit! ⚽️</h1>
        <h2>Prémium Előfizetés</h2>
        <p>Szerezz hozzáférést a napi tippekhez és a Napi Tuti szelvényekhez!</p>
        
        <div class="package">
            <h3>Havi Hozzáférés</h3>
            <p class="price">5 € / hónap</p>
            <p>Teljeskörű hozzáférés a bothoz 30 napig.</p>
            <button id="checkout-button">Előfizetek</button>
        </div>
        
        <div id="error-message"></div>
    </div>

    <script type="text/javascript">
      // FONTOS: Cseréld le a 'pk_test_...' részt a saját Stripe publikálható kulcsodra!
      var stripe = Stripe('pk_test_51RxsXRGwJ52Lmi82tbAPlmPQBIGfB2FZKrRl37lrawkkLiJO00J3AGeYagNtBYFjy0fxrACUiZnypHx6xnayDmKa00MU2L1GHr');
      var checkoutButton = document.getElementById('checkout-button');
      var errorElement = document.getElementById('error-message');

      checkoutButton.addEventListener('click', function() {
        checkoutButton.disabled = true;
        checkoutButton.textContent = "Átirányítás a fizetéshez...";

        // FONTOS: Cseréld le az URL-t a saját Render alkalmazásod URL-jére!
        var renderApiUrl = 'https://foci-telegram-bot.onrender.com/create-checkout-session';

        fetch(renderApiUrl, {
            method: 'POST',
        })
        .then(function(response) {
            return response.json();
        })
        .then(function(session) {
            if (session.id) {
                return stripe.redirectToCheckout({ sessionId: session.id });
            } else {
                throw new Error('Hiba a fizetési munkamenet létrehozásakor.');
            }
        })
        .then(function(result) {
            if (result.error) {
                errorElement.textContent = result.error.message;
                checkoutButton.disabled = false;
                checkoutButton.textContent = "Előfizetek";
            }
        })
        .catch(function(error) {
            console.error('Hiba:', error);
            errorElement.textContent = 'Hiba történt a fizetési oldal betöltésekor. Kérlek, próbáld újra később.';
            checkoutButton.disabled = false;
            checkoutButton.textContent = "Előfizetek";
        });
      });
    </script>
</body>
</html>
